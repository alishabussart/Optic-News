<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta name="format-detection" content="telephone=no" />
		<meta name="msapplication-tap-highlight" content="no" />
		<!-- WARNING: for iOS 7, remove the width=device-width and height=device-height attributes. See https://issues.apache.org/jira/browse/CB-4323 -->
		<meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />

		<link href='https://fonts.googleapis.com/css?family=Roboto:900,300,100,100italic,300italic,400italic,400,500,500italic,700,700italic,900italic' rel='stylesheet' type='text/css'>
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css"><link rel="stylesheet" href="path/to/font-awesome/css/font-awesome.min.css">

		<link rel="stylesheet" type="text/css" href="css/index.css" />

		<link rel="stylesheet" href="../plugins/mdl/material.min.css">
		<script src="../plugins/mdl/material.min.js"></script>
		
		<script src="../plugins/cordova-plugin-splashscreen/www/splashscreen.js"></script>
		
		<script type="text/javascript" src="http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobox/src/infobox.js"></script>
		
		<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">		
		<title>Optic News</title>
	</head>
	<body>
		<div class="top-bar">Optic News</div>
		<div class="app main">
			<style>
				#map {
					width: 100%;
					height: 100%;
				}
			</style>
			<script src="https://maps.googleapis.com/maps/api/js"></script>
			<script>
				function initialize() {
					var myLatLng = { lat: 33.4172, lng: -111.9365 };
					var mapCanvas = document.getElementById('map');
					var mapOptions = {
						center: new google.maps.LatLng(myLatLng),
						zoom: 14,
						styles: [{"featureType":"all","elementType":"labels.text.fill","stylers":[{"saturation":36},{"color":"#333333"},{"lightness":40}]},{"featureType":"all","elementType":"labels.text.stroke","stylers":[{"visibility":"on"},{"color":"#ffffff"},{"lightness":16}]},{"featureType":"all","elementType":"labels.icon","stylers":[{"visibility":"off"}]},{"featureType":"administrative","elementType":"all","stylers":[{"visibility":"off"}]},{"featureType":"administrative","elementType":"geometry.fill","stylers":[{"color":"#fefefe"},{"lightness":20}]},{"featureType":"administrative","elementType":"geometry.stroke","stylers":[{"color":"#fefefe"},{"lightness":17},{"weight":1.2}]},{"featureType":"landscape","elementType":"geometry","stylers":[{"lightness":20},{"color":"#ececec"}]},{"featureType":"landscape.man_made","elementType":"all","stylers":[{"visibility":"on"},{"color":"#f0f0ef"}]},{"featureType":"landscape.man_made","elementType":"geometry.fill","stylers":[{"visibility":"on"},{"color":"#f0f0ef"}]},{"featureType":"landscape.man_made","elementType":"geometry.stroke","stylers":[{"visibility":"on"},{"color":"#d4d4d4"}]},{"featureType":"landscape.natural","elementType":"all","stylers":[{"visibility":"on"},{"color":"#ececec"}]},{"featureType":"poi","elementType":"all","stylers":[{"visibility":"on"}]},{"featureType":"poi","elementType":"geometry","stylers":[{"lightness":21},{"visibility":"off"}]},{"featureType":"poi","elementType":"geometry.fill","stylers":[{"visibility":"on"},{"color":"#d4d4d4"}]},{"featureType":"poi","elementType":"labels.text.fill","stylers":[{"color":"#303030"}]},{"featureType":"poi","elementType":"labels.icon","stylers":[{"saturation":"-100"}]},{"featureType":"poi.attraction","elementType":"all","stylers":[{"visibility":"on"}]},{"featureType":"poi.business","elementType":"all","stylers":[{"visibility":"on"}]},{"featureType":"poi.government","elementType":"all","stylers":[{"visibility":"on"}]},{"featureType":"poi.medical","elementType":"all","stylers":[{"visibility":"on"}]},{"featureType":"poi.park","elementType":"all","stylers":[{"visibility":"on"}]},{"featureType":"poi.park","elementType":"geometry","stylers":[{"color":"#dedede"},{"lightness":21}]},{"featureType":"poi.place_of_worship","elementType":"all","stylers":[{"visibility":"on"}]},{"featureType":"poi.school","elementType":"all","stylers":[{"visibility":"on"}]},{"featureType":"poi.school","elementType":"geometry.stroke","stylers":[{"lightness":"-61"},{"gamma":"0.00"},{"visibility":"off"}]},{"featureType":"poi.sports_complex","elementType":"all","stylers":[{"visibility":"on"}]},{"featureType":"road.highway","elementType":"geometry.fill","stylers":[{"color":"#ffffff"},{"lightness":17}]},{"featureType":"road.highway","elementType":"geometry.stroke","stylers":[{"color":"#ffffff"},{"lightness":29},{"weight":0.2}]},{"featureType":"road.arterial","elementType":"geometry","stylers":[{"color":"#ffffff"},{"lightness":18}]},{"featureType":"road.local","elementType":"geometry","stylers":[{"color":"#ffffff"},{"lightness":16}]},{"featureType":"transit","elementType":"geometry","stylers":[{"color":"#f2f2f2"},{"lightness":19}]},{"featureType":"water","elementType":"geometry","stylers":[{"color":"#dadada"},{"lightness":17}]}],
						mapTypeId: google.maps.MapTypeId.ROADMAP
					}
					var map = new google.maps.Map(mapCanvas, mapOptions)
					var image = 'img/pin.png';
					/*var contentString = '<div id="content">' +
						'<div id="siteNotice">' +
						'</div>' +
						'<h3 id="firstHeading" class="firstHeading">Story Title</h1>' +
						'<div id="bodyContent">' +
						'<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed laoreet ultrices risus, ut euismod sapien finibus vitae. Pellentesque a nunc efficitur, maximus dolor vel, ultricies velit. Nulla venenatis nec tellus sed volutpat. Suspendisse nec facilisis lacus. In in odio ornare, tempor urna commodo, cursus nibh. Vivamus a gravida neque. Maecenas et vestibulum magna. Vestibulum finibus id sapien suscipit pellentesque. Sed sit amet quam sed risus gravida imperdiet id a lorem. Proin ultrices pretium nunc vitae volutpat. Mauris auctor vehicula nisl ac sagittis.' +
						//'<iframe width="420" height="315" src="http://www.youtube.com/embed/DxYyHHR0Q1c?autoplay=0"></iframe>' +
						'<a href="story1.html">Read Full Story</a>'
					'</div>' +
						'</div>';*/
					
					/*var contentString = 
						"<div class='listed-stories map'><div class='item'><div class='image-preview'>"
					+ "<div style='background-image: url('"
					+ exampleimg
					+ "');'>"
					+ "<div class='title'>Iron Man Competition</div><div class='date'>July 16th, 2015</div><div class='accent'></div></div></div>"
					+ "<div><div class='summary'><div class='location'>Tempe Beach Park, Arizona</div>"
					+ "Thousands of people took to the streets of Tempe this morning to watch some of the top athletes compete in the Ironman.And with this many people in one location, and with the recent terror attacks in Paris, Tempe Police were on high alert. Multiple law enforcement agencies, local and federal, were on hand making sure today’s event was a safe one.<br></br>"

					+ "Tempe Police said planning for something like this takes months, and with what happened in Paris recently, security is top of mind.Lt. Scott Smith with Tempe Police says there are about 10,000 people participating in the event and roughly 3000 of those are competitors."

					+ "</div><div class='options'> <div class=''>"
					+ "<a href='map.html'><i class='fa fa-map-marker'></i></a></div>"
					+ "<div class=''><i class='fa fa-star'></i></div>"
					+ "<div class='view-full'><a href='story1.html'>Read Full Story</a></div></div></div></div></div>"
					;*/
					
					/*var contentString = "Iron Man event blocking multiple lanes of traffic. Tempe, AZ.";
					var infowindow = new google.maps.InfoWindow({
						content: contentString,
						maxWidth: 300,
					});*/
					
					
					var newsAlerts = [
						['Iron Man Competiton <a href="story1.html"><i class="fa fa-chevron-right"></i></a>', 33.430882, -111.941486, 1],
						['ASU Condom Delivery <a href="story2.html"><i class="fa fa-chevron-right"></i></a>', 33.424154, -111.928037, 2],
						['Digital Culture Showcase <a href="story3.html"><i class="fa fa-chevron-right"></i></a>', 33.419868, -111.937302, 3],
						['Police investigating possible robbery, Tempe AZ', 33.422027, -111.930140, 4],
						['<b>BREAKING:</b> Gas leak leads to fire, city working to contain.', 33.414460, -111.930902, 5],
						
						['ASU Advisory - Tempe ASU Police investigating a suspicious package in the area of Coor Hall, please avoid the area until further notice.', 33.419350, -111.937211, 6]
						//['Maroubra Beach', -33.950198, 151.259302, 1],
						//['Maroubra Beach', -33.950198, 151.259302, 1],
						//['Maroubra Beach', -33.950198, 151.259302, 1]

					];
					
					var infowindow = new google.maps.InfoWindow({maxWidth: 300});
					var marker, i;
					for (i = 0; i < newsAlerts.length; i++) {  
						marker = new google.maps.Marker({
							position: new google.maps.LatLng(newsAlerts[i][1], newsAlerts[i][2]),
							map: map,
							icon: image,
							animation: google.maps.Animation.DROP
						});

						google.maps.event.addListener(marker, 'click', (function(marker, i) {
							return function() {
								infowindow.setContent(newsAlerts[i][0]);
								infowindow.open(map, marker);
							}
						})(marker, i));
					}
					
					/*var marker = new google.maps.Marker({
						position: myLatLng,
						map: map,
						draggable: true,
						animation: google.maps.Animation.DROP,
						icon: image,
						title: 'Optic News'
					});*/
					marker.addListener('click', function () {
						infowindow.open(map, marker);
					});
					marker.addListener('click', toggleBounce);

					//var infoWindow = new google.maps.InfoWindow({ map: map });

					// Try HTML5 geolocation.
					if (navigator.geolocation) {
						navigator.geolocation.getCurrentPosition(function (position) {
							var pos = {
								lat: position.coords.latitude,
								lng: position.coords.longitude
							};

							infoWindow.setPosition(pos);
							//infoWindow.setContent('Location found.');
							map.setCenter(pos);
						}, function () {
							handleLocationError(true, infoWindow, map.getCenter());
						});
					} else {
						// Browser doesn't support Geolocation
						handleLocationError(false, infoWindow, map.getCenter());
					}
				}

				function toggleBounce() {
					if (marker.getAnimation() !== null) {
						marker.setAnimation(null);
					} else {
						marker.setAnimation(google.maps.Animation.BOUNCE);
					}
				}

				/*function handleLocationError(browserHasGeolocation, infoWindow, pos) {
					infoWindow.setPosition(pos);
					infoWindow.setContent(browserHasGeolocation ?
										  'Error: The Geolocation service failed.' :
										  'Error: Your browser doesn\'t support geolocation.');
				}*/

				google.maps.event.addDomListener(window, 'load', initialize);




			</script>

			<div id="map"></div>

		</div>
		<div class="bottom-bar">
			<ul id="nav">
				<li class="active"><a href="index.html"><i class="fa fa-map-o"></i></a></li>
				<li><a href="upload.html"><i class="fa fa-camera"></i></a></li>
				<!--<li><a href="profile.html"><i class="fa fa-user"></i></a></li>-->
				<li><a href="listed-stories.html"><i class="fa fa-list"></i></a></li>
			</ul>
		</div>

		<script type="text/javascript" src="./cordova.js"></script>
		<script type="text/javascript" src="js/index.js"></script>
		<script type="text/javascript">
			app.initialize();
		</script>
	</body>
</html>
